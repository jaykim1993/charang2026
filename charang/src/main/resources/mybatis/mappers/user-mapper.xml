<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

	
<mapper namespace="cha.user.mapper.UserMapper">

   <!-- 전체 회원 출력
	List<UserDTO> selectAllUser(); -->
	<select id="selectAllUser" resultType="userDTO">
		SELECT * FROM user
	</select>

   <!-- 회원 가입 INSERT -->
   <insert id="insertUser" parameterType="userDTO">
      INSERT INTO user(userId,userPw,name,mail,resistNum,phone,address,addressDetail,isKorean,license,licenseNum)
      VALUES(#{userId},#{userPw},#{name},#{mail},#{resistNum},#{phone},#{address},#{addressDetail},#{isKorean},#{license},#{licenseNum})
   </insert>
   
   <!-- 로그인할 계정이 DB에 있는지 아이디 중복체크 -->
   <select id="isUser" parameterType="String" resultType="boolean">
      SELECT COUNT(*) FROM user WHERE userId=#{userId}
   </select>
   
   <!-- 회원 수정 -->
   <update id="modUser" parameterType="userDTO">
      UPDATE user SET name=#{name},mail=#{mail},phone=#{phone},address=#{address},addressDetail=#{addressDetail},
                  license=#{license},licenseNum=#{licenseNum} WHERE userId=#{userId}
   </update>
   
   <!-- 회원탈퇴 -->
   <delete id="delUser" parameterType="String">
      DELETE FROM user WHERE userId=#{userId}
   </delete>
   
   <!-- 비밀번호 반환 -->
   <select id="getPass" parameterType="String" resultType="String">
      SELECT userPw FROM user WHERE userId=#{userId}
   </select>
   
   <!-- 회원 한명 -->
   <select id="oneUser" parameterType="String" resultType="userDTO">
      SELECT * FROM user WHERE userId=#{userId}
   </select>   
   
   <!-- 아이디 중복체크 -->
   <select id="existUserId" parameterType="String" resultType="boolean">
       SELECT COUNT(*) > 0
       FROM user
       WHERE userId = #{userId}
   </select>
   
</mapper>