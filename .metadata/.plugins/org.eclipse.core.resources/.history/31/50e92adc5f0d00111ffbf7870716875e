<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cha.car.mapper.CarMapper">

    <!-- 전체 차량 리스트 메서드
	public List<CarDTO> getAllCar(); -->
	<select id="getAllCar" resultType="carDTO">
		SELECT * FROM car
	</select>
	
	<!-- 차량 검색 메서드
	public List<CarDTO> getSearchCarList( String searchType, String searchKeyWord); -->
	<select id="getSearchCarList" resultType="carDTO">
		SELECT * FROM car
		<where>
			<choose>
				<when test="searchType == 'carName'">
					model LIKE CONCAT("%",#{searchKeyWord},"%")
				</when>
				<otherwise>
					plateNumber LIKE CONCAT("%",#{searchKeyWord},"%")
				</otherwise>
			</choose>
		</where>
		ORDER BY carId DESC
	</select>
	
	<!-- 차량 삭제 메서드
	public int deleteCar(List<Integer> carId); -->
	<delete id="deleteCar" parameterType="list">
		DELETE FROM car WHERE IN
		<foreach item="id" collection="list" open="(" separator="," close=")">
			#{carId}
		</foreach>
	</delete>
	
</mapper>